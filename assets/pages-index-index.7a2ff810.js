import{s,a as t,r as e,b as o,g as n,c as i,d as l,o as a,e as c,w as r,i as f,f as h,h as u,t as d,j as y,k,l as _,F as m,m as p,n as g}from"./index-ffa2d601.js";import{_ as C,c as I,r as S,a as b}from"./config.0571e00a.js";const w=C({data:()=>({value:["0"],urlList:I.urlList,sentencesInfo:{},history:[]}),onLoad(){this.getHistory(),this.getSentences()},methods:{copy(e){s({data:e,success:()=>{t({title:"复制成功",icon:"success"})}})},getSentences(){e({url:"https://v1.hitokoto.cn",success:s=>{200==s.statusCode&&(this.sentencesInfo=s.data)}})},handleClick(s){s.info?o({title:"提示",content:s.info,confirmText:"知道了",success:({confirm:t})=>{t&&(console.log("item"),this.setHistory(s),window.open(s.url,"_blank"))}}):(this.setHistory(s),window.open(s.url,"_blank"))},getHistory(){let s=n("history");s&&(s=JSON.parse(s)||[],s.length>0&&(this.history=s))},clearHistory(){o({title:"提示",content:"确定要清空历史记录吗？",confirmText:"清空",success:s=>{s.confirm&&(i("history"),this.history=[])}})},setHistory(s){let t=n("history");if(t){t=JSON.parse(t),t.length>4&&t.pop();const e=t.findIndex((t=>t.url===s.url));-1===e?(t.unshift(s),l("history",JSON.stringify(t)),this.history=t):(t.splice(e,1),t.unshift(s),l("history",JSON.stringify(t)),this.history=t)}else l("history",JSON.stringify([s])),this.history=[s]}}},[["render",function(s,t,e,o,n,i){const l=S(p("uni-icons"),b),C=f,I=g;return a(),c(C,{class:"container"},{default:r((()=>[h(C,{class:"title-box"},{default:r((()=>[h(C,{class:"fresh-btn",onClick:i.getSentences},{default:r((()=>[h(l,{type:"refresh",size:"26",color:"#3490de"})])),_:1},8,["onClick"]),h(C,{class:"content",onClick:t[0]||(t[0]=s=>i.copy(n.sentencesInfo.hitokoto))},{default:r((()=>[u(d(n.sentencesInfo.hitokoto),1)])),_:1}),h(C,{class:"from"},{default:r((()=>[u(" —— "),n.sentencesInfo.from_who?(a(),c(I,{key:0},{default:r((()=>[u(d(n.sentencesInfo.from_who+"·"),1)])),_:1})):y("",!0),h(I,null,{default:r((()=>[u(d(n.sentencesInfo.from),1)])),_:1})])),_:1})])),_:1}),n.history.length>0?(a(),c(C,{key:0,class:"cate-title"},{default:r((()=>[h(C,null,{default:r((()=>[u("上次打开")])),_:1}),h(C,{class:"clear-btn",onClick:t[1]||(t[1]=s=>i.clearHistory())},{default:r((()=>[h(l,{type:"refreshempty",size:"14",color:"#fff"}),u(" 清空 ")])),_:1})])),_:1})):y("",!0),n.history.length>0?(a(),c(C,{key:1,class:"url-container"},{default:r((()=>[(a(!0),k(m,null,_(n.history,((s,t)=>(a(),c(C,{class:"url-item",key:t,onClick:t=>i.handleClick(s)},{default:r((()=>[u(d(s.title),1)])),_:2},1032,["onClick"])))),128))])),_:1})):y("",!0),h(C,{class:"cate-title"},{default:r((()=>[u("在线观影")])),_:1}),h(C,{class:"url-container"},{default:r((()=>[(a(!0),k(m,null,_(n.urlList[0].children[0].urls,((s,t)=>(a(),c(C,{class:"url-item",key:t,onClick:t=>i.handleClick(s)},{default:r((()=>[u(d(s.title),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-28730ccb"]]);export{w as default};
