import{j as x,ch as R,ci as d,bt as j,P as _,cj as p,aT as k,a as v}from"./index-3ab894b1.js";const y=new WeakMap;function M(e,n,i={}){const{mode:o="replace",route:r=x(),router:t=R(),transform:l=s=>s}=i;y.has(t)||y.set(t,new Map);const a=y.get(t);let u=r.query[e];d(()=>{u=void 0});let f;const q=j((s,m)=>(f=m,{get(){return s(),l(u!==void 0?u:p(n))},set(c){u!==c&&(u=c,a.set(e,c),m(),k(()=>{if(a.size===0)return;const g=Object.fromEntries(a.entries());a.clear();const{params:h,query:b,hash:w}=r;t[p(o)]({params:h,query:{...b,...g},hash:w})}))}}));return _(()=>r.query[e],s=>{u=s,f()},{flush:"sync"}),q}const Q={number:{fromQuery:e=>Number(e),toQuery:e=>String(e)},string:{fromQuery:e=>e,toQuery:e=>e},boolean:{fromQuery:e=>e.toLowerCase()==="true",toQuery:e=>e?"true":"false"}};function P({name:e,defaultValue:n}){const o=Q[typeof n]??Q.string,r=M(e,o.toQuery(n));return v({get(){return o.fromQuery(r.value)},set(t){r.value=o.toQuery(t)}})}export{P as u};
