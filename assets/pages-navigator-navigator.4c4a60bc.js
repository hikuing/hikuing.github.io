import{p as t,m as e,o as i,e as s,w as l,f as n,q as a,u as o,j as c,h as r,t as h,v as d,x as u,n as p,i as f,b as m,g as y,d as g,k as _,l as S,F as b}from"./index-8ca97a6e.js";import{_ as k,r as C,a as v,c as w}from"./config.0c66dee5.js";const O=k({name:"uniCollapseItem",props:{title:{type:String,default:""},name:{type:[Number,String],default:""},disabled:{type:Boolean,default:!1},showAnimation:{type:Boolean,default:!0},open:{type:Boolean,default:!1},thumb:{type:String,default:""},titleBorder:{type:String,default:"auto"},border:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0}},data:()=>({isOpen:!1,isheight:null,height:0,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,nameSync:0}),watch:{open(t){this.isOpen=t,this.onClick(t,"init")}},updated(t){this.$nextTick((()=>{this.init(!0)}))},created(){this.collapse=this.getCollapse(),this.oldHeight=0,this.onClick(this.open,"init")},unmounted(){this.__isUnmounted=!0,this.uninstall()},mounted(){this.collapse&&(""!==this.name?this.nameSync=this.name:this.nameSync=this.collapse.childrens.length+"",-1===this.collapse.names.indexOf(this.nameSync)?this.collapse.names.push(this.nameSync):console.warn(`name 值 ${this.nameSync} 重复`),-1===this.collapse.childrens.indexOf(this)&&this.collapse.childrens.push(this),this.init())},methods:{init(t){this.getCollapseHeight(t)},uninstall(){this.collapse&&(this.collapse.childrens.forEach(((t,e)=>{t===this&&this.collapse.childrens.splice(e,1)})),this.collapse.names.forEach(((t,e)=>{t===this.nameSync&&this.collapse.names.splice(e,1)})))},onClick(t,e){this.disabled||(this.isOpen=t,this.isOpen&&this.collapse&&this.collapse.setAccordion(this),"init"!==e&&this.collapse.onChange(t,this))},getCollapseHeight(e,i=0){t().in(this).select(`#${this.elId}`).fields({size:!0},(t=>{if(!(i>=10)){if(!t)return i++,void this.getCollapseHeight(!1,i);this.height=t.height,this.isheight=!0,e||this.onClick(this.isOpen,"init")}})).exec()},getNvueHwight(t){dom.getComponentRect(this.$refs["collapse--hook"],(e=>{if(e&&e.result&&e.size){if(this.height=e.size.height,this.isheight=!0,t)return;this.onClick(this.open,"init")}}))},getCollapse(t="uniCollapse"){let e=this.$parent,i=e.$options.name;for(;i!==t;){if(e=e.$parent,!e)return!1;i=e.$options.name}return e}}},[["render",function(t,m,y,g,_,S){const b=u,k=p,w=f,O=C(e("uni-icons"),v);return i(),s(w,{class:"uni-collapse-item"},{default:l((()=>[n(w,{onClick:m[0]||(m[0]=t=>S.onClick(!_.isOpen)),class:a(["uni-collapse-item__title",{"is-open":_.isOpen&&"auto"===y.titleBorder,"uni-collapse-item-border":"none"!==y.titleBorder}])},{default:l((()=>[n(w,{class:"uni-collapse-item__title-wrap"},{default:l((()=>[o(t.$slots,"title",{},(()=>[n(w,{class:a(["uni-collapse-item__title-box",{"is-disabled":y.disabled}])},{default:l((()=>[y.thumb?(i(),s(b,{key:0,src:y.thumb,class:"uni-collapse-item__title-img"},null,8,["src"])):c("",!0),n(k,{class:"uni-collapse-item__title-text"},{default:l((()=>[r(h(y.title),1)])),_:1})])),_:1},8,["class"])]),!0)])),_:3}),y.showArrow?(i(),s(w,{key:0,class:a([{"uni-collapse-item__title-arrow-active":_.isOpen,"uni-collapse-item--animation":!0===y.showAnimation},"uni-collapse-item__title-arrow"])},{default:l((()=>[n(O,{color:y.disabled?"#ddd":"#bbb",size:"14",type:"bottom"},null,8,["color"])])),_:1},8,["class"])):c("",!0)])),_:3},8,["class"]),n(w,{class:a(["uni-collapse-item__wrap",{"is--transition":y.showAnimation}]),style:d({height:(_.isOpen?_.height:0)+"px"})},{default:l((()=>[n(w,{id:_.elId,ref:"collapse--hook",class:a(["uni-collapse-item__wrap-content",{open:_.isheight,"uni-collapse-item--border":y.border&&_.isOpen}])},{default:l((()=>[o(t.$slots,"default",{},void 0,!0)])),_:3},8,["id","class"])])),_:3},8,["class","style"])])),_:3})}],["__scopeId","data-v-d9eb4150"]]);const $=k({name:"uniCollapse",emits:["change","activeItem","input","update:modelValue"],props:{value:{type:[String,Array],default:""},modelValue:{type:[String,Array],default:""},accordion:{type:[Boolean,String],default:!1}},data:()=>({}),computed:{dataValue(){let t="string"==typeof this.value&&""===this.value||Array.isArray(this.value)&&0===this.value.length;"string"==typeof this.modelValue&&""===this.modelValue||Array.isArray(this.modelValue)&&this.modelValue.length;return t?this.modelValue:this.value}},watch:{dataValue(t){this.setOpen(t)}},created(){this.childrens=[],this.names=[]},mounted(){this.$nextTick((()=>{this.setOpen(this.dataValue)}))},methods:{setOpen(t){let e="string"==typeof t,i=Array.isArray(t);this.childrens.forEach(((s,l)=>{if(e&&t===s.nameSync){if(!this.accordion)return void console.warn("accordion 属性为 false ,v-model 类型应该为 array");s.isOpen=!0}i&&t.forEach((t=>{if(t===s.nameSync){if(this.accordion)return void console.warn("accordion 属性为 true ,v-model 类型应该为 string");s.isOpen=!0}}))})),this.emit(t)},setAccordion(t){this.accordion&&this.childrens.forEach(((e,i)=>{t!==e&&(e.isOpen=!1)}))},resize(){this.childrens.forEach(((t,e)=>{t.getCollapseHeight()}))},onChange(t,e){let i=[];this.accordion?i=t?e.nameSync:"":this.childrens.forEach(((t,e)=>{t.isOpen&&i.push(t.nameSync)})),this.$emit("change",i),this.emit(i)},emit(t){this.$emit("input",t),this.$emit("update:modelValue",t)}}},[["render",function(t,e,n,a,c,r){const h=f;return i(),s(h,{class:"uni-collapse"},{default:l((()=>[o(t.$slots,"default",{},void 0,!0)])),_:3})}],["__scopeId","data-v-3aec18a2"]]);const x=k({name:"UniSection",emits:["click"],props:{type:{type:String,default:""},title:{type:String,required:!0,default:""},titleFontSize:{type:String,default:"14px"},titleColor:{type:String,default:"#333"},subTitle:{type:String,default:""},subTitleFontSize:{type:String,default:"12px"},subTitleColor:{type:String,default:"#999"},padding:{type:[Boolean,String],default:!1}},computed:{_padding(){return"string"==typeof this.padding?this.padding:this.padding?"10px":""}},watch:{title(t){uni.report&&""!==t&&uni.report("title",t)}},methods:{onClick(){this.$emit("click")}}},[["render",function(t,e,u,m,y,g){const _=f,S=p;return i(),s(_,{class:"uni-section"},{default:l((()=>[n(_,{class:"uni-section-header",onClick:g.onClick},{default:l((()=>[u.type?(i(),s(_,{key:0,class:a(["uni-section-header__decoration",u.type])},null,8,["class"])):o(t.$slots,"decoration",{key:1},void 0,!0),n(_,{class:"uni-section-header__content"},{default:l((()=>[n(S,{style:d({"font-size":u.titleFontSize,color:u.titleColor}),class:a(["uni-section__content-title",{distraction:!u.subTitle}])},{default:l((()=>[r(h(u.title),1)])),_:1},8,["style","class"]),u.subTitle?(i(),s(S,{key:0,style:d({"font-size":u.subTitleFontSize,color:u.subTitleColor}),class:"uni-section-header__content-sub"},{default:l((()=>[r(h(u.subTitle),1)])),_:1},8,["style"])):c("",!0)])),_:1}),n(_,{class:"uni-section-header__slot-right"},{default:l((()=>[o(t.$slots,"right",{},void 0,!0)])),_:3})])),_:3},8,["onClick"]),n(_,{class:"uni-section-content",style:d({padding:g._padding})},{default:l((()=>[o(t.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3})}],["__scopeId","data-v-0a8818d5"]]);const A=k({data:()=>({value:["0"],urlList:w.urlList}),methods:{handleClick(t){t.info?m({title:"提示",content:t.info,confirmText:"知道了",success:({confirm:e})=>{e&&(console.log("item"),this.setHistory(t),window.open(t.url,"_blank"))}}):(this.setHistory(t),window.open(t.url,"_blank"))},setHistory(t){let e=y("history");if(e){e=JSON.parse(e),e.length>4&&e.pop();const i=e.findIndex((e=>e.url===t.url));-1===i?(e.unshift(t),g("history",JSON.stringify(e)),this.history=e):(e.splice(i,1),e.unshift(t),g("history",JSON.stringify(e)),this.history=e)}else g("history",JSON.stringify([t])),this.history=[t]}}},[["render",function(t,a,o,c,d,u){const p=f,m=C(e("uni-collapse-item"),O),y=C(e("uni-collapse"),$),g=C(e("uni-section"),x);return i(),s(p,{class:"container"},{default:l((()=>[(i(!0),_(b,null,S(d.urlList,((t,e)=>(i(),s(g,{title:t.title,type:"line",class:"section-box",key:e},{default:l((()=>[n(y,{ref_for:!0,ref:"collapse",class:"collapse-box",accordion:""},{default:l((()=>[(i(!0),_(b,null,S(t.children,((t,e)=>(i(),s(m,{title:t.title,class:"collapse-item",key:e},{default:l((()=>[n(p,{class:"content"},{default:l((()=>[(i(!0),_(b,null,S(t.urls,((t,e)=>(i(),s(p,{class:"content-item",key:e,onClick:e=>u.handleClick(t)},{default:l((()=>[r(h(t.title),1)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:2},1536)])),_:2},1032,["title"])))),128))])),_:1})}],["__scopeId","data-v-cf2338bb"]]);export{A as default};
