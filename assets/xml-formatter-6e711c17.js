import{_ as A}from"./FormatTransformer.vue_vue_type_script_setup_true_lang-b85745d1.js";import{G as k,aG as O,d as I,B as T,o as $,e as B,f as F,i as y,w as X,g as j,v as L,F as R}from"./index-3ab894b1.js";import{w as Y}from"./defaults-4d6daddf.js";import{_ as U}from"./Switch-fcb5373b.js";import{_ as V}from"./FormItem-209cdc1b.js";import{_ as W}from"./InputNumber-5360f6f6.js";import"./TextareaCopyable-a58bb9f3.js";import"./Copy-7a3d9e1b.js";import"./Scrollbar-fe74b47d.js";import"./use-form-item-f7149e4e.js";import"./use-locale-739ea672.js";import"./Button-a9945df3.js";import"./is-browser-fc34c9a6.js";import"./color-to-class-8578b472.js";import"./Remove-674c47b2.js";var S={exports:{}},M={exports:{}};(function(d,c){Object.defineProperty(c,"__esModule",{value:!0}),c.ParsingError=void 0;class m extends Error{constructor(o,i){super(o),this.cause=i}}c.ParsingError=m;let r;function g(){return v(!1)||P()||_()||b()}function x(){return e(/\s*/),v(!0)||_()||E()||w(!1)}function a(){const n=w(!0),o=[];let i,u=x();for(;u;){if(u.node.type==="Element"){if(i)throw new Error("Found multiple root nodes");i=u.node}u.excluded||o.push(u.node),u=x()}if(!i)throw new m("Failed to parse XML","Root Element not found");if(r.xml.length!==0)throw new m("Failed to parse XML","Not Well-Formed XML");return{declaration:n?n.node:null,root:i,children:o}}function w(n){const o=e(n?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!o)return;const i={name:o[1],type:"ProcessingInstruction",attributes:{}};for(;!(l()||s("?>"));){const u=C();if(u)i.attributes[u.name]=u.value;else return}return e(/\?>/),{excluded:n?!1:r.options.filter(i)===!1,node:i}}function v(n){const o=e(/^<([^?!</>\s]+)\s*/);if(!o)return;const i={type:"Element",name:o[1],attributes:{},children:[]},u=n?!1:r.options.filter(i)===!1;for(;!(l()||s(">")||s("?>")||s("/>"));){const h=C();if(h)i.attributes[h.name]=h.value;else return}if(e(/^\s*\/>/))return i.children=null,{excluded:u,node:i};e(/\??>/);let f=g();for(;f;)f.excluded||i.children.push(f.node),f=g();if(r.options.strictMode){const h=`</${i.name}>`;if(r.xml.startsWith(h))r.xml=r.xml.slice(h.length);else throw new m("Failed to parse XML",`Closing tag not matching "${h}"`)}else e(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:u,node:i}}function E(){const n=e(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||e(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||e(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||e(/^<!DOCTYPE\s+\S+\s*>/);if(n){const o={type:"DocumentType",content:n[0]};return{excluded:r.options.filter(o)===!1,node:o}}}function b(){if(r.xml.startsWith("<![CDATA[")){const n=r.xml.indexOf("]]>");if(n>-1){const o=n+3,i={type:"CDATA",content:r.xml.substring(0,o)};return r.xml=r.xml.slice(o),{excluded:r.options.filter(i)===!1,node:i}}}}function _(){const n=e(/^<!--[\s\S]*?-->/);if(n){const o={type:"Comment",content:n[0]};return{excluded:r.options.filter(o)===!1,node:o}}}function P(){const n=e(/^([^<]+)/);if(n){const o={type:"Text",content:n[1]};return{excluded:r.options.filter(o)===!1,node:o}}}function C(){const n=e(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(n)return{name:n[1].trim(),value:t(n[2].trim())}}function t(n){return n.replace(/^['"]|['"]$/g,"")}function e(n){const o=r.xml.match(n);if(o)return r.xml=r.xml.slice(o[0].length),o}function l(){return r.xml.length===0}function s(n){return r.xml.indexOf(n)===0}function p(n,o={}){n=n.trim();const i=o.filter||(()=>!0);return r={xml:n,options:Object.assign(Object.assign({},o),{filter:i,strictMode:o.strictMode===!0})},a()}d.exports=p,c.default=p})(M,M.exports);var z=M.exports;(function(d,c){var m=O&&O.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(c,"__esModule",{value:!0});const r=m(z);function g(t){if(!t.options.indentation&&!t.options.lineSeparator)return;t.content+=t.options.lineSeparator;let e;for(e=0;e<t.level;e++)t.content+=t.options.indentation}function x(t){t.content=t.content.replace(/ +$/,"");let e;for(e=0;e<t.level;e++)t.content+=t.options.indentation}function a(t,e){t.content+=e}function w(t,e,l){if(typeof t.content=="string")v(t.content,e,l);else if(t.type==="Element")b(t,e,l);else if(t.type==="ProcessingInstruction")P(t,e);else throw new Error("Unknown node type: "+t.type)}function v(t,e,l){if(!l){const s=t.trim();(e.options.lineSeparator||s.length===0)&&(t=s)}t.length>0&&(!l&&e.content.length>0&&g(e),a(e,t))}function E(t,e){const l="/"+t.join("/"),s=t[t.length-1];return e.includes(s)||e.includes(l)}function b(t,e,l){if(e.path.push(t.name),!l&&e.content.length>0&&g(e),a(e,"<"+t.name),_(e,t.attributes),t.children===null||e.options.forceSelfClosingEmptyTag&&t.children.length===0){const s=e.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";a(e,s)}else if(t.children.length===0)a(e,"></"+t.name+">");else{const s=t.children;a(e,">"),e.level++;let p=t.attributes["xml:space"]==="preserve",n=!1;if(!p&&e.options.ignoredPaths&&(n=E(e.path,e.options.ignoredPaths),p=n),!p&&e.options.collapseContent){let o=!1,i=!1,u=!1;s.forEach(function(f,h){f.type==="Text"?(f.content.includes(`
`)?(i=!0,f.content=f.content.trim()):(h===0||h===s.length-1)&&!l&&f.content.trim().length===0&&(f.content=""),f.content.trim().length>0&&(o=!0)):f.type==="CDATA"?o=!0:u=!0}),o&&(!u||!i)&&(p=!0)}s.forEach(function(o){w(o,e,l||p)}),e.level--,!l&&!p&&g(e),n&&x(e),a(e,"</"+t.name+">")}e.path.pop()}function _(t,e){Object.keys(e).forEach(function(l){const s=e[l].replace(/"/g,"&quot;");a(t," "+l+'="'+s+'"')})}function P(t,e){e.content.length>0&&g(e),a(e,"<?"+t.name),_(e,t.attributes),a(e,"?>")}function C(t,e={}){e.indentation="indentation"in e?e.indentation:"    ",e.collapseContent=e.collapseContent===!0,e.lineSeparator="lineSeparator"in e?e.lineSeparator:`\r
`,e.whiteSpaceAtEndOfSelfclosingTag=e.whiteSpaceAtEndOfSelfclosingTag===!0,e.throwOnFailure=e.throwOnFailure!==!1;try{const l=(0,r.default)(t,{filter:e.filter,strictMode:e.strictMode}),s={content:"",level:0,options:e,path:[]};return l.declaration&&P(l.declaration,s),l.children.forEach(function(p){w(p,s,!1)}),e.lineSeparator?s.content.replace(/\r\n/g,`
`).replace(/\n/g,e.lineSeparator):s.content}catch(l){if(e.throwOnFailure)throw l;return t}}C.minify=(t,e={})=>C(t,Object.assign(Object.assign({},e),{indentation:"",lineSeparator:""})),d.exports=C,c.default=C})(S,S.exports);var G=S.exports;const D=k(G);function N(d){return d.trim()}function q(d,c){return Y(()=>D(N(d),c)??"","")}function Q(d){const c=N(d);if(c==="")return!0;try{return D(c),!0}catch{return!1}}const H={"important:flex-full":"","important:flex-shrink-0":"","important:flex-grow-0":""},J={flex:"","justify-center":""},K="<hello><world>foo</world><world>bar</world></hello>",de=I({__name:"xml-formatter",setup(d){const c=T("xml-formatter:indent-size",2),m=T("xml-formatter:collapse-content",!0);function r(x){return q(x,{indentation:" ".repeat(c.value),collapseContent:m.value,lineSeparator:`
`})}const g=[{validator:Q,message:"Provided XML is not valid."}];return(x,a)=>{const w=U,v=V,E=W,b=A;return $(),B(R,null,[F("div",H,[F("div",J,[y(v,{label:"Collapse content:","label-placement":"left"},{default:X(()=>[y(w,{value:j(m),"onUpdate:value":a[0]||(a[0]=_=>L(m)?m.value=_:null)},null,8,["value"])]),_:1}),y(v,{label:"Indent size:","label-placement":"left","label-width":"100","show-feedback":!1},{default:X(()=>[y(E,{value:j(c),"onUpdate:value":a[1]||(a[1]=_=>L(c)?c.value=_:null),min:"0",max:"10","w-100px":""},null,8,["value"])]),_:1})])]),y(b,{"input-label":"Your XML","input-placeholder":"Paste your XML here...","output-label":"Formatted XML from your XML","output-language":"xml","input-validation-rules":g,transformer:r,"input-default":K})],64)}}});export{de as default};
