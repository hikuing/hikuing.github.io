import{d as M,o as w,e as k,f as h,a1 as E,b as A,bg as I,aH as K,F as B,r as N,i as e,g as n,bh as O,w as p,l as x,aT as P,a2 as z,m as R,aI as F,B as T,a as H,s as W,v as q,x as G,E as J,c as Q,H as X,y as Y}from"./index-3ab894b1.js";import{_ as Z}from"./InputNumber-5360f6f6.js";import{_ as ee}from"./Scrollbar-fe74b47d.js";import{_ as te}from"./Divider-c69188b1.js";import{_ as ne}from"./FormItem-209cdc1b.js";import"./use-locale-739ea672.js";import"./use-form-item-f7149e4e.js";import"./Button-a9945df3.js";import"./is-browser-fc34c9a6.js";import"./color-to-class-8578b472.js";import"./Remove-674c47b2.js";const oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ae=h("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("path",{d:"M12 5v14"}),h("path",{d:"M5 12h14"})],-1),se=[ae],L=M({name:"Plus",render:function(a,l){return w(),k("svg",oe,se)}}),le={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},re=E('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"></path><path d="M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"></path></g>',1),ie=[re],D=M({name:"Trash",render:function(a,l){return w(),k("svg",le,ie)}});function U({data:o}){return o.length===0?0:A.sum(o)/o.length}function ue({data:o}){const a=U({data:o}),l=o.map(_=>(_-a)**2);return U({data:l})}function ce({data:o,headerMap:a={}}){if(!Array.isArray(o)||o.length===0)return"";const l=Object.keys(o[0]),_=o.map(m=>Object.values(m)),f=`| ${l.map(m=>a[m]??m).join(" | ")} |`,i=`| ${l.map(()=>"---").join(" | ")} |`,$=_.map(m=>`| ${m.join(" | ")} |`).join(`
`);return`${f}
${i}
${$}`}const pe=M({__name:"dynamic-values",props:{values:{}},emits:["update:values"],setup(o,{emit:a}){const l=o,_=a,f=I(),i=K(l,"values",_);async function $(){i.value.push(null),await P(),f.value.at(-1)?.focus()}function m(y){if(y===i.value.length-1){$();return}f.value.at(y+1)?.focus()}return(y,s)=>{const t=z,r=R,g=F;return w(),k("div",null,[(w(!0),k(B,null,N(n(i),(b,v)=>(w(),k("div",{key:v,"mb-2":"",flex:"","flex-nowrap":"","gap-2":""},[e(n(Z),{ref_for:!0,ref:n(f).set,value:n(i)[v],"onUpdate:value":u=>n(i)[v]=u,"show-button":!1,placeholder:"Set your measure...",autofocus:"",onKeydown:O(u=>m(v),["enter"])},null,8,["value","onUpdate:value","onKeydown"]),e(g,{tooltip:"Delete this value"},{default:p(()=>[e(r,{circle:"",variant:"text",onClick:u=>n(i).splice(v,1)},{default:p(()=>[e(t,{component:n(D),depth:"3",size:"18"},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),e(r,{onClick:$},{default:p(()=>[e(t,{component:n(L),depth:"3","mr-2":"",size:"18"},null,8,["component"]),x(" Add a measure ")]),_:1})])}}}),_e={"mb-5":"",flex:"","flex-1":"","flex-nowrap":"","justify-center":"","gap-12px":""},me={flex:"","justify-center":""},de={style:{flex:"0 0 100%"}},fe={style:{"max-width":"600px",margin:"0 auto"}},ve={"mx-auto":"","max-w-sm":"",flex:"","justify-center":"","gap-3":""},he={"mt-5":"",flex:"","justify-center":"","gap-3":""},Ve=M({__name:"benchmark-builder",setup(o){const a=T("benchmark-builder:suites",[{title:"Suite 1",data:[5,10]},{title:"Suite 2",data:[8,12]}]),l=T("benchmark-builder:unit",""),_=s=>Math.round(s*1e3)/1e3,f=H(()=>a.value.map(({data:s,title:t})=>{const r=s.filter(A.isNumber);return{title:t,size:r.length,mean:U({data:r}),variance:ue({data:r})}}).sort((s,t)=>s.mean-t.mean).map(({mean:s,variance:t,size:r,title:g},b,v)=>{const u=l.value.trim(),d=v[0].mean,j=s-d,S=d===0?"∞":_(s/d),c=b!==0&&d!==s?` (+${_(j)}${u} ; x${S})`:"";return{position:b+1,title:g,mean:`${_(s)}${u}${c}`,variance:`${_(t)}${u}${u?"²":""}`,size:r}})),{copy:i}=W({createToast:!1}),$={position:"Position",title:"Suite",size:"Samples",mean:"Mean",variance:"Variance"};function m(){i(ce({data:f.value,headerMap:$}))}function y(){const s=f.value.flatMap(({title:t,...r})=>[` - ${t}`,...Object.entries(r).map(([g,b])=>`    - ${$[g]??g}: ${b}`)]).join(`
`);i(s)}return(s,t)=>{const r=G,g=te,b=ne,v=Y,u=z,d=R,j=ee,S=J;return w(),k(B,null,[e(j,{style:{flex:"1"},"x-scrollable":""},{default:p(()=>[h("div",_e,[(w(!0),k(B,null,N(n(a),(c,V)=>(w(),k("div",{key:V},[e(v,{style:{width:"294px"}},{default:p(()=>[e(r,{value:c.title,"onUpdate:value":C=>c.title=C,"label-position":"left",label:"Suite name",placeholder:"Suite name...",clearable:""},null,8,["value","onUpdate:value"]),e(g),e(b,{label:"Suite values","show-feedback":!1},{default:p(()=>[e(pe,{values:c.data,"onUpdate:values":C=>c.data=C},null,8,["values","onUpdate:values"])]),_:2},1024)]),_:2},1024),h("div",me,[n(a).length>1?(w(),Q(d,{key:0,variant:"text",onClick:C=>n(a).splice(V,1)},{default:p(()=>[e(u,{component:n(D),depth:"3","mr-2":"",size:"18"},null,8,["component"]),x(" Delete suite ")]),_:2},1032,["onClick"])):X("",!0),e(d,{variant:"text",onClick:C=>n(a).splice(V+1,0,{data:[0],title:`Suite ${n(a).length+1}`})},{default:p(()=>[e(u,{component:n(L),depth:"3","mr-2":"",size:"18"},null,8,["component"]),x(" Add suite ")]),_:2},1032,["onClick"])])]))),128))])]),_:1}),h("div",de,[h("div",fe,[h("div",ve,[e(r,{value:n(l),"onUpdate:value":t[0]||(t[0]=c=>q(l)?l.value=c:null),placeholder:"Unit (eg: ms)",label:"Unit","label-position":"left","mb-4":""},null,8,["value"]),e(d,{onClick:t[1]||(t[1]=c=>a.value=[{title:"Suite 1",data:[]},{title:"Suite 2",data:[]}])},{default:p(()=>[x(" Reset suites ")]),_:1})]),e(S,{data:n(f),headers:$},null,8,["data"]),h("div",he,[e(d,{onClick:t[2]||(t[2]=c=>m())},{default:p(()=>[x(" Copy as markdown table ")]),_:1}),e(d,{onClick:t[3]||(t[3]=c=>y())},{default:p(()=>[x(" Copy as bullet list ")]),_:1})])])])],64)}}});export{Ve as default};
